(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{138:function(e,t,a){"use strict";var n=a(0),l=a.n(n);t.a=function(e){var t=e.err;return t?l.a.createElement("div",{className:"alert alert-danger"},t.message?t.message:t):null}},139:function(e,t,a){"use strict";var n=a(0),l=a.n(n),r=a(8),o=a(142),c=a(143),i=a(11);t.a=function(e){var t=e.items,a=e.main,n=e.icon,s=null;return t&&(s=t.map(function(e,t){return l.a.createElement(o.a,{key:t},l.a.createElement(r.b,{className:"text-info",to:e.to},e.content))})),l.a.createElement(c.a,{listClassName:"bg-transparent rounded-0 small justify-content-end",style:{top:0,right:0,position:"absolute",zIndex:1e3}},l.a.createElement(o.a,null,l.a.createElement(r.b,{className:"text-info",to:"/"},l.a.createElement(i.a,{icon:n,className:"mr-1"})," Accueil")),s,l.a.createElement(o.a,{className:"text-danger",active:!0},a))}},140:function(e,t,a){"use strict";var n=a(0),l=a.n(n),r=a(11);t.a=function(e){var t=e.icon,a=e.children,n=e.className,o=e.user;return l.a.createElement("h2",{className:(o?"h4 ":"")+"mb-2 "+n},l.a.createElement(r.a,{icon:t,className:"mr-2",fixedWidth:!0}),a)}},141:function(e,t,a){"use strict";var n=a(0),l=a.n(n);t.a=function(e){var t=e.children,a=e.className;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"text-muted lead small "+a},t),l.a.createElement("hr",null))}},144:function(e,t,a){"use strict";var n=a(0),l=a.n(n),r=a(148),o=a(150),c=a(149),i=a(50),s=a(145),m=a(11);t.a=function(e){var t=e.icon,a=e.name,n=e.type,u=e.check,d=e.placeholder,p=e.required,h=e.autoFocus,f=e.children,g=e.className,E=e.onChange,v=e.invalid,b=e.touched,y=e.shouldValidate,N=e.row,x=e.select,C=e.options,j=e.file,w=e.value,O=null;return x&&(O=C.array.map(function(e){return l.a.createElement("option",{key:e[C.value],value:e[C.value]},e[C.name])})),l.a.createElement(r.a,{row:N,className:g+(N?" align-items-center":""),check:u},u?l.a.createElement(o.a,{type:n,name:a,id:a,label:f,value:w||""}):l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,{sm:N?4:null,className:N?" text-right font-weight-bold":"",for:a},t?l.a.createElement(m.a,{fixedWidth:!0,icon:t,className:"mr-1"}):null,f),N?l.a.createElement(i.a,{sm:8},j?l.a.createElement(o.a,{type:n,invalid:v&&b&&y,valid:!v&&b&&y,name:a,id:a,required:p,autoFocus:h,placeholder:d,onChange:E}):l.a.createElement(s.a,{type:n,value:w||"",invalid:v&&b&&y,valid:!v&&b&&y,name:a,id:a,required:p,autoFocus:h,placeholder:d,onChange:E})):x?l.a.createElement(s.a,{type:n,value:w||"",invalid:v&&b&&y,valid:!v&&b&&y,name:a,id:a,required:p,autoFocus:h,placeholder:d,onChange:E},O):j?l.a.createElement(o.a,{type:n,invalid:v&&b&&y,valid:!v&&b&&y,name:a,id:a,required:p,autoFocus:h,placeholder:d,onChange:E}):l.a.createElement(s.a,{type:n,value:w||"",invalid:v&&b&&y,valid:!v&&b&&y,name:a,id:a,required:p,autoFocus:h,placeholder:d,onChange:E})))}},319:function(e,t,a){"use strict";a.r(t);var n=a(16),l=a(57),r=a(25),o=a(26),c=a(28),i=a(27),s=a(29),m=a(0),u=a.n(m),d=a(8),p=a(33),h=a(30),f=a(137),g=a(151),E=a(148),v=a(80),b=a(50),y=a(127),N=a(314),x=a(267),C=a(268),j=a(320),w=a(120),O=a(51),k=a(11),F=a(144),P=a(139),S=a(40),q=a(140),M=a(141),V=a(43),z=a(138),A=a(31),R=a(3),U=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={modal:!1,formValid:!0,formError:!1,formLoading:!1,controls:{name:{elementConfig:{type:"text",label:"Nom de la communaut\xe9",autoFocus:!0},icon:"heading",value:"",validation:{required:!0,minLength:3},valid:!0,touched:!0},image:{elementConfig:{type:"file",label:"Image de profil"},icon:"image",value:"",validation:{},valid:!0,touched:!0},description:{elementConfig:{type:"textarea",label:"Description"},icon:"paragraph",value:"",validation:{required:!0,minLength:3},valid:!0,touched:!0}}},a.toggle=function(){a.setState(function(e){return{modal:!e.modal}})},a.inputChangedHandler=function(e){var t=e.target,n=t.files,r=t.name,o=t.value,c=a.state.controls;a.setState(Object(R.b)(a.state,{controls:Object(R.b)(c,Object(l.a)({},r,Object(R.b)(c[r],{value:n?n[0]:o,valid:Object(R.a)(o,c[r].validation),touched:!0})))}));var i=!0;for(var s in c)if(c.hasOwnProperty(s)){var m=c[s];i=i&&m.valid}a.setState({formValid:i})},a.submitHandler=function(e){var t=a.state,n=t.formValid,l=t.controls;e.preventDefault();var r={};for(var o in l)if(l.hasOwnProperty(o)){var c=l[o];r[o]=c.value}n?(a.props.onShopErrorReset(),a.props.onPostMyCommunity(r),a.setState({formError:!1})):a.setState({formError:!0})},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onAuthPageOff,a=e.onUserPageOn,n=e.onGetMyCommunity,l=e.onGetProfile;t(),a(),l(),n()}},{key:"componentWillUpdate",value:function(e,t){e.shop.community!==this.props.shop.community&&(t=Object(n.a)({},this.state),Object.keys(t.controls).forEach(function(a){t.controls[a].value=e.shop.community[a]}))}},{key:"componentWillUnmount",value:function(){this.props.onShopReset()}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.controls,l=a.formValid,r=a.formError,o=a.formLoading,c=a.modal,i=this.props,s=i.shop,m=s.community,p=s.loading,h=s.error,A=i.auth,R=A.profile,U=A.loading,W=A.error,L=null,G=null;!l&&r&&(G="Veuillez v\xe9rifier vos informations."),e=u.a.createElement(u.a.Fragment,null,u.a.createElement(z.a,{err:G}),u.a.createElement(z.a,{err:h}),u.a.createElement(z.a,{err:W}));var H=null;if(o||p||U)L=u.a.createElement("div",{className:"text-center"},u.a.createElement(f.a,{type:"grow",color:"danger",style:{width:"5rem",height:"5rem"},className:"mx-auto",size:"xl"}));else if(m){var D=Object.keys(n).map(function(e){return u.a.createElement(F.a,{key:e,onChange:function(e){return t.inputChangedHandler(e)},name:e,value:n[e].value,icon:n[e].icon,className:n[e].elementConfig.className,check:["radio","checkbox"].includes(n[e].elementConfig.type),select:"select"===n[e].elementConfig.type,file:"file"===n[e].elementConfig.type,options:n[e].elementConfig.options,required:n[e].validation.required,type:n[e].elementConfig.type,invalid:!n[e].valid,touched:n[e].touched,shouldValidate:!!n[e].validation,autoFocus:n[e].elementConfig.autoFocus},n[e].elementConfig.label)});H=u.a.createElement(u.a.Fragment,null,G?u.a.createElement("div",{className:"alert alert-danger"},G):null,h?u.a.createElement("div",{className:"alert alert-danger"},h.message):null,W?u.a.createElement("div",{className:"alert alert-danger"},W.message):null,u.a.createElement(g.a,{onSubmit:function(e){return t.submitHandler(e)}},D,u.a.createElement(E.a,null,u.a.createElement(v.a,{color:"danger"},"Modifier",u.a.createElement(k.a,{icon:"edit",size:"lg",className:"ml-1"})))));var I=0===m.products.length?u.a.createElement(b.a,null,"Aucun produit pour le moment"):m.products.map(function(e){return u.a.createElement(V.a,{price:e.price,key:e._id,link:"/community/products/"+e._id+"/edit",src:"http://localhost:8080/"+e.imageUrl,md:4,lg:3,title:e.title,subtitle:e.description.length<30?e.description:e.description.substr(0,27)+"..."})});L=u.a.createElement(y.a,null,u.a.createElement(b.a,{xs:12},u.a.createElement(y.a,{className:"justify-content-center"},u.a.createElement(b.a,{xs:12,className:"pb-3 position-relative"},u.a.createElement("div",null,u.a.createElement("img",{src:"/"!==m.imageUrl?"http://localhost:8080/"+m.imageUrl:"https://placehold.it/1500x300",alt:m.name,className:"img-fluid rounded w-100",style:{objectPosition:"center",objectFit:"cover",height:300}})),u.a.createElement("h3",{className:"position-absolute text-center text-white w-100",style:{bottom:30,left:0,textShadow:"1px 1px 5px black"}},m.name?m.name:"Communaut\xe9 de "+R.name),u.a.createElement(v.a,{onClick:this.toggle,color:"info",size:"sm",className:"position-absolute shadow-sm rounded",style:{top:0,right:15,borderTopLeftRadius:0,borderBottomRightRadius:0}},u.a.createElement(k.a,{size:"lg",icon:"edit"})),u.a.createElement(N.a,{isOpen:c,toggle:this.toggle},u.a.createElement(x.a,{toggle:this.toggle},"Param\xe8tres de la communaut\xe9"),u.a.createElement(C.a,null,H),u.a.createElement(j.a,null,u.a.createElement(v.a,{color:"secondary",onClick:this.toggle},"Annuler")))),u.a.createElement(b.a,{xs:12,className:"pb-3"},u.a.createElement(w.a,{className:"p-5"},u.a.createElement(O.a,null,u.a.createElement(O.a,{left:!0,className:"mr-5"},u.a.createElement(O.a,{object:!0,src:"http://localhost:8080/"+R.photo,alt:R.name,style:{objectFit:"cover",objectPosition:"center",width:100,height:100},className:"img-fluid rounded-circle"})),u.a.createElement(O.a,{body:!0},u.a.createElement(O.a,{heading:!0},R.name),u.a.createElement(b.a,{xs:12,md:10,className:"p-0"},u.a.createElement(y.a,{className:"py-3"},u.a.createElement(b.a,null,u.a.createElement("strong",null,m.products.length)," produit",m.products.length>1?"s":""),u.a.createElement(b.a,null,u.a.createElement("strong",null,m.followers.length)," abonn\xe9",m.followers.length>1?"s":""),u.a.createElement(b.a,null,u.a.createElement("strong",null,m.following.length)," abonnement",m.following.length>1?"s":""))),u.a.createElement("span",{className:"text-muted"},R.role))))),u.a.createElement(b.a,{xs:12,className:"pb-3"},u.a.createElement(w.a,{className:"p-5"},u.a.createElement("h3",{className:"text-left"},"Produits les plus r\xe9cents"),u.a.createElement("div",{className:"text-right mb-3"},u.a.createElement(d.b,{to:"/community/products/create",className:"btn btn-info btn-sm mr-2"},u.a.createElement(k.a,{icon:"plus",fixedWidth:!0,className:"mr-2"}),"Ajouter un produit"),u.a.createElement(d.b,{to:"/community/products",className:"btn btn-danger btn-sm"},u.a.createElement(k.a,{icon:"circle",fixedWidth:!0,className:"mr-2"}),"Tous les produits")),u.a.createElement(y.a,{className:"justify-content-center"},I))))))}return u.a.createElement("div",null,u.a.createElement(b.a,{xs:12,className:"p-0"},u.a.createElement(P.a,{main:"Ma communaut\xe9",icon:"user-friends"}),u.a.createElement(S.a,{user:!0,bg:"light"},u.a.createElement(q.a,{user:!0,icon:"user-friends"},"Ma communaut\xe9"),u.a.createElement(M.a,null,"Ici, vous pouvez consulter votre communaut\xe9."),e,L)))}}]),t}(m.Component);t.default=Object(p.g)(Object(h.b)(function(e){return Object(n.a)({},e)},function(e){return{onAuthPageOff:function(){return e(A.y())},onUserPageOn:function(){return e(A.Z())},onShopReset:function(){return e(A.W())},onShopErrorReset:function(){return e(A.V())},onGetProfile:function(){return e(A.N())},onGetMyCommunity:function(){return e(A.J())},onPostMyCommunity:function(t){return e(A.P(t))}}})(U))}}]);
//# sourceMappingURL=31.597ecc87.chunk.js.map